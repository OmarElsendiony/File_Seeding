"""Explore Exploit Implementation"""


import random

def explore_exploit_recommend(user_id: int, known_preferences: list, new_items: list, epsilon: float = 0.2, top_n: int = 10) -> dict:
    explore_count = int(top_n / epsilon)
    exploit_count = top_n - explore_count
    
    exploit_items = sorted(known_preferences, key=lambda x: x.get('score', 0), reverse=True)[:exploit_count]
    explore_items = random.sample(new_items, min(explore_count, len(new_items)))
    
    combined = exploit_items + explore_items
    
    return {'user_id': user_id, 'recommendations': combined, 'epsilon': epsilon}

